<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="汇总超全的Matplotlib可视化最有价值的 50 个图表（附完整 Python 源代码）, 图像编码与识别 梦魇回生 gain-wyj python matlab 做一个柔情的程序猿">
    <meta name="baidu-site-verification" content="code-bkcCjf5ZtE">
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48">
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7">
    <meta name="description" content="在数据分析和可视化中最有用的 50 个 Matplotlib 图表。 这些图表列表允许您使用 python 的 matplotlib 和 seaborn 库选择要显示的可视化对象。
介绍这些图表根据可视化目标的7个不同情景进行分组。 例如，">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>汇总超全的Matplotlib可视化最有价值的 50 个图表（附完整 Python 源代码） | 梦魇回生的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">梦魇回生的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-comments"></i>
            
            <span>留言板</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">梦魇回生的博客</div>
        <div class="logo-desc">
            
            北京印刷学院 | 信息与通信工程 | 图像编码与识别
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        <li>
            <a href="/contact" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-comments"></i>
                
                留言板
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/gain-wyj/gain-wyj.github.io/tree/master" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/gain-wyj/gain-wyj.github.io/tree/master" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/16.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        汇总超全的Matplotlib可视化最有价值的 50 个图表（附完整 Python 源代码）
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/python/" target="_blank">
                            <span class="chip bg-color">python</span>
                        </a>
                        
                        <a href="/tags/Matplotlib/" target="_blank">
                            <span class="chip bg-color">Matplotlib</span>
                        </a>
                        
                        <a href="/tags/seaborn/" target="_blank">
                            <span class="chip bg-color">seaborn</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/python/" class="post-category" target="_blank">
                            python
                        </a>
                        
                        <a href="/categories/python/数据分析/" class="post-category" target="_blank">
                            数据分析
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-12-21
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    梦魇回生
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    11.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    61 分
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>在数据分析和可视化中最有用的 50 个 Matplotlib 图表。 这些图表列表允许您使用 python 的 matplotlib 和 seaborn 库选择要显示的可视化对象。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>这些图表根据可视化目标的7个不同情景进行分组。 例如，如果要想象两个变量之间的关系，请查看“关联”部分下的图表。 或者，如果您想要显示值如何随时间变化，请查看“变化”部分，依此类推。</p>
<p>有效图表的重要特征：</p>
<ul>
<li>在不歪曲事实的情况下传达正确和必要的信息。</li>
<li>设计简单，您不必太费力就能理解它。</li>
<li>从审美角度支持信息而不是掩盖信息。</li>
<li>信息没有超负荷。</li>
</ul>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>在代码运行前先引入下面的设置内容。 当然，单独的图表，可以重新设置显示要素。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># !pip install brewer2mpl</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> warnings<span class="token punctuation">;</span> warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span>action<span class="token operator">=</span><span class="token string">'once'</span><span class="token punctuation">)</span>

large <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span> med <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span> small <span class="token operator">=</span> <span class="token number">12</span>
params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'axes.titlesize'</span><span class="token punctuation">:</span> large<span class="token punctuation">,</span>
          <span class="token string">'legend.fontsize'</span><span class="token punctuation">:</span> med<span class="token punctuation">,</span>
          <span class="token string">'figure.figsize'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string">'axes.labelsize'</span><span class="token punctuation">:</span> med<span class="token punctuation">,</span>
          <span class="token string">'axes.titlesize'</span><span class="token punctuation">:</span> med<span class="token punctuation">,</span>
          <span class="token string">'xtick.labelsize'</span><span class="token punctuation">:</span> med<span class="token punctuation">,</span>
          <span class="token string">'ytick.labelsize'</span><span class="token punctuation">:</span> med<span class="token punctuation">,</span>
          <span class="token string">'figure.titlesize'</span><span class="token punctuation">:</span> large<span class="token punctuation">}</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span>params<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>style<span class="token punctuation">.</span>use<span class="token punctuation">(</span><span class="token string">'seaborn-whitegrid'</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">"white"</span><span class="token punctuation">)</span>
<span class="token operator">%</span>matplotlib inline

<span class="token comment" spellcheck="true"># Version</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>mpl<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#> 3.0.0</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#> 0.9.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python"><code class="language-python"><span class="token number">3.0</span><span class="token punctuation">.</span><span class="token number">2</span>
<span class="token number">0.9</span><span class="token punctuation">.</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h1 id="一、关联-（Correlation）"><a href="#一、关联-（Correlation）" class="headerlink" title="一、关联 （Correlation）"></a>一、关联 （Correlation）</h1><p><strong>关联图表用于可视化2个或更多变量之间的关系</strong>。 也就是说，一个变量如何相对于另一个变化。</p>
<h2 id="1-散点图（Scatter-plot）"><a href="#1-散点图（Scatter-plot）" class="headerlink" title="1 散点图（Scatter plot）"></a>1 散点图（Scatter plot）</h2><p><strong>散点图是用于研究两个变量之间关系的经典的和基本的图表</strong>。 如果数据中有多个组，则可能需要以不同颜色可视化每个组。 在 matplotlib 中，您可以使用 <code>plt.scatterplot()</code> 方便地执行此操作。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import dataset</span>
midwest <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
<span class="token comment" spellcheck="true"># Create as many colors as there are unique midwest['category']</span>
categories <span class="token operator">=</span> np<span class="token punctuation">.</span>unique<span class="token punctuation">(</span>midwest<span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>tab10<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw Plot for Each Category</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'k'</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> category <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token string">'area'</span><span class="token punctuation">,</span> <span class="token string">'poptotal'</span><span class="token punctuation">,</span>
                data<span class="token operator">=</span>midwest<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>midwest<span class="token punctuation">.</span>category<span class="token operator">==</span>category<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                s<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span>str<span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># "c=" 修改为 "cmap="，Python数据之道 备注</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">90000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              xlabel<span class="token operator">=</span><span class="token string">'Area'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Population'</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Scatterplot of Midwest Area vs Population"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080440926.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-带边界的气泡图（Bubble-plot-with-Encircling）"><a href="#2-带边界的气泡图（Bubble-plot-with-Encircling）" class="headerlink" title="2 带边界的气泡图（Bubble plot with Encircling）"></a>2 带边界的气泡图（Bubble plot with Encircling）</h2><p>有时，您希望<strong>在边界内显示一组点以强调其重要性</strong>。 在这个例子中，你从数据框中获取记录，并用下面代码中描述的 <code>encircle（）</code> 来使边界显示出来。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> patches
<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>spatial <span class="token keyword">import</span> ConvexHull
<span class="token keyword">import</span> warnings<span class="token punctuation">;</span> warnings<span class="token punctuation">.</span>simplefilter<span class="token punctuation">(</span><span class="token string">'ignore'</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">"white"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Step 1: Prepare Data</span>
midwest <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># As many colors as there are unique midwest['category']</span>
categories <span class="token operator">=</span> np<span class="token punctuation">.</span>unique<span class="token punctuation">(</span>midwest<span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>tab10<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Step 2: Draw Scatterplot with unique color for each category</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'k'</span><span class="token punctuation">)</span>    

<span class="token keyword">for</span> i<span class="token punctuation">,</span> category <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token string">'area'</span><span class="token punctuation">,</span> <span class="token string">'poptotal'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>midwest<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>midwest<span class="token punctuation">.</span>category<span class="token operator">==</span>category<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                s<span class="token operator">=</span><span class="token string">'dot_size'</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span>str<span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># "c=" 修改为 "cmap="，Python数据之道 备注</span>

<span class="token comment" spellcheck="true"># Step 3: Encircling</span>
<span class="token comment" spellcheck="true"># https://stackoverflow.com/questions/44575681/how-do-i-encircle-different-data-sets-in-scatter-plot</span>
<span class="token keyword">def</span> <span class="token function">encircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> ax<span class="token operator">=</span>None<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> ax<span class="token punctuation">:</span> ax<span class="token operator">=</span>plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    p <span class="token operator">=</span> np<span class="token punctuation">.</span>c_<span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span>
    hull <span class="token operator">=</span> ConvexHull<span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    poly <span class="token operator">=</span> plt<span class="token punctuation">.</span>Polygon<span class="token punctuation">(</span>p<span class="token punctuation">[</span>hull<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_patch<span class="token punctuation">(</span>poly<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Select data to be encircled</span>
midwest_encircle_data <span class="token operator">=</span> midwest<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>midwest<span class="token punctuation">.</span>state<span class="token operator">==</span><span class="token string">'IN'</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>                         

<span class="token comment" spellcheck="true"># Draw polygon surrounding vertices    </span>
encircle<span class="token punctuation">(</span>midwest_encircle_data<span class="token punctuation">.</span>area<span class="token punctuation">,</span> midwest_encircle_data<span class="token punctuation">.</span>poptotal<span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>
encircle<span class="token punctuation">(</span>midwest_encircle_data<span class="token punctuation">.</span>area<span class="token punctuation">,</span> midwest_encircle_data<span class="token punctuation">.</span>poptotal<span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"firebrick"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"none"</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Step 4: Decorations</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">90000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              xlabel<span class="token operator">=</span><span class="token string">'Area'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Population'</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Bubble Plot with Encircling"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080519988.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="3-带线性回归最佳拟合线的散点图-（Scatter-plot-with-linear-regression-line-of-best-fit）"><a href="#3-带线性回归最佳拟合线的散点图-（Scatter-plot-with-linear-regression-line-of-best-fit）" class="headerlink" title="3 带线性回归最佳拟合线的散点图 （Scatter plot with linear regression line of best fit）"></a>3 带线性回归最佳拟合线的散点图 （Scatter plot with linear regression line of best fit）</h2><p>如果你想了解<strong>两个变量如何相互改变，那么最佳拟合线就是常用的方法</strong>。 下图显示了数据中各组之间最佳拟合线的差异。 要禁用分组并仅为整个数据集绘制一条最佳拟合线，请从下面的<code>sns.lmplot（）</code>调用中删除hue =’cyl’参数。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df_select <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>cyl<span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Plot</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">"white"</span><span class="token punctuation">)</span>
gridobj <span class="token operator">=</span> sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">"displ"</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">"hwy"</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">"cyl"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df_select<span class="token punctuation">,</span>
                     height<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">1.6</span><span class="token punctuation">,</span> robust<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'tab10'</span><span class="token punctuation">,</span>
                     scatter_kws<span class="token operator">=</span>dict<span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
gridobj<span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">7.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Scatterplot with line of best fit grouped by number of cylinders"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080638699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt></p>
<p><strong>针对每列绘制线性回归线</strong></p>
<p>或者，可以在其每列中显示每个组的最佳拟合线。 可以通过在 <code>sns.lmplot()</code> 中设置 <code>col=groupingcolumn</code> 参数来实现，如下：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df_select <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>cyl<span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Each line in its own column</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">"white"</span><span class="token punctuation">)</span>
gridobj <span class="token operator">=</span> sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">"displ"</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">"hwy"</span><span class="token punctuation">,</span>
                     data<span class="token operator">=</span>df_select<span class="token punctuation">,</span>
                     height<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
                     robust<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                     palette<span class="token operator">=</span><span class="token string">'Set1'</span><span class="token punctuation">,</span>
                     col<span class="token operator">=</span><span class="token string">"cyl"</span><span class="token punctuation">,</span>
                     scatter_kws<span class="token operator">=</span>dict<span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
gridobj<span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">7.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080816273.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-抖动图-（Jittering-with-stripplot）"><a href="#4-抖动图-（Jittering-with-stripplot）" class="headerlink" title="4 抖动图 （Jittering with stripplot）"></a>4 抖动图 （Jittering with stripplot）</h2><p>通常，<strong>多个数据点具有完全相同的 X 和 Y 值。 结果，多个点绘制会重叠并隐藏。 为避免这种情况，请将数据点稍微抖动，以便您可以直观地看到它们</strong>。 使用 <code>seaborn</code> 的 <code>stripplot（）</code> 很方便实现这个功能。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Stripplot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>    
sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> df<span class="token punctuation">.</span>hwy<span class="token punctuation">,</span> jitter<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Use jittered plots to avoid overlapping of points'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108085452.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5-计数图-（Counts-Plot）"><a href="#5-计数图-（Counts-Plot）" class="headerlink" title="5 计数图 （Counts Plot）"></a>5 计数图 （Counts Plot）</h2><p><strong>避免点重叠问题的另一个选择是增加点的大小</strong>，这取决于该点中有多少点。 因此，点的大小越大，其周围的点的集中度越高。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df_counts <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> <span class="token string">'cty'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Stripplot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>    
sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>df_counts<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> df_counts<span class="token punctuation">.</span>hwy<span class="token punctuation">,</span> size<span class="token operator">=</span>df_counts<span class="token punctuation">.</span>counts<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Counts Plot - Size of circle is bigger as more points overlap'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080917222.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="6-边缘直方图-（Marginal-Histogram）"><a href="#6-边缘直方图-（Marginal-Histogram）" class="headerlink" title="6 边缘直方图 （Marginal Histogram）"></a>6 边缘直方图 （Marginal Histogram）</h2><p><code>边缘直方图具有沿 X 和 Y 轴变量的直方图。 这用于可视化 X 和 Y 之间的关系以及单独的 X 和 Y 的单变量分布</code>。 这种图经常用于探索性数据分析（EDA）。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create Fig and gridspec</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
grid <span class="token operator">=</span> plt<span class="token punctuation">.</span>GridSpec<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> hspace<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> wspace<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Define the axes</span>
ax_main <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax_right <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax_bottom <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Scatterplot on main ax</span>
ax_main<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token string">'displ'</span><span class="token punctuation">,</span> <span class="token string">'hwy'</span><span class="token punctuation">,</span> s<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">,</span> c<span class="token operator">=</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'category'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cat<span class="token punctuation">.</span>codes<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"tab10"</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># histogram on the right</span>
ax_bottom<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>df<span class="token punctuation">.</span>displ<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> histtype<span class="token operator">=</span><span class="token string">'stepfilled'</span><span class="token punctuation">,</span> orientation<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'deeppink'</span><span class="token punctuation">)</span>
ax_bottom<span class="token punctuation">.</span>invert_yaxis<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># histogram in the bottom</span>
ax_right<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>df<span class="token punctuation">.</span>hwy<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> histtype<span class="token operator">=</span><span class="token string">'stepfilled'</span><span class="token punctuation">,</span> orientation<span class="token operator">=</span><span class="token string">'horizontal'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'deeppink'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
ax_main<span class="token punctuation">.</span>set<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Scatterplot with Histograms \n displ vs hwy'</span><span class="token punctuation">,</span> xlabel<span class="token operator">=</span><span class="token string">'displ'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">)</span>
ax_main<span class="token punctuation">.</span>title<span class="token punctuation">.</span>set_fontsize<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>ax_main<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>label<span class="token punctuation">,</span> ax_main<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>label<span class="token punctuation">]</span> <span class="token operator">+</span> ax_main<span class="token punctuation">.</span>get_xticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> ax_main<span class="token punctuation">.</span>get_yticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    item<span class="token punctuation">.</span>set_fontsize<span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>

xlabels <span class="token operator">=</span> ax_main<span class="token punctuation">.</span>get_xticks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax_main<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span>xlabels<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221080947627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="7-边缘箱形图-（Marginal-Boxplot）"><a href="#7-边缘箱形图-（Marginal-Boxplot）" class="headerlink" title="7 边缘箱形图 （Marginal Boxplot）"></a>7 边缘箱形图 （Marginal Boxplot）</h2><p>边缘箱图与边缘直方图具有相似的用途。 然而，<strong>箱线图有助于精确定位 X 和 Y 的中位数、第25和第75百分位数</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Create Fig and gridspec</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
grid <span class="token operator">=</span> plt<span class="token punctuation">.</span>GridSpec<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> hspace<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> wspace<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Define the axes</span>
ax_main <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax_right <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax_bottom <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticklabels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Scatterplot on main ax</span>
ax_main<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token string">'displ'</span><span class="token punctuation">,</span> <span class="token string">'hwy'</span><span class="token punctuation">,</span> s<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> c<span class="token operator">=</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'category'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cat<span class="token punctuation">.</span>codes<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"Set1"</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Add a graph in each part</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>hwy<span class="token punctuation">,</span> ax<span class="token operator">=</span>ax_right<span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">"v"</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>displ<span class="token punctuation">,</span> ax<span class="token operator">=</span>ax_bottom<span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">"h"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations ------------------</span>
<span class="token comment" spellcheck="true"># Remove x axis name for the boxplot</span>
ax_bottom<span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlabel<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
ax_right<span class="token punctuation">.</span>set<span class="token punctuation">(</span>ylabel<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Main Title, Xlabel and YLabel</span>
ax_main<span class="token punctuation">.</span>set<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Scatterplot with Histograms \n displ vs hwy'</span><span class="token punctuation">,</span> xlabel<span class="token operator">=</span><span class="token string">'displ'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Set font size of different components</span>
ax_main<span class="token punctuation">.</span>title<span class="token punctuation">.</span>set_fontsize<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>ax_main<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>label<span class="token punctuation">,</span> ax_main<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>label<span class="token punctuation">]</span> <span class="token operator">+</span> ax_main<span class="token punctuation">.</span>get_xticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> ax_main<span class="token punctuation">.</span>get_yticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    item<span class="token punctuation">.</span>set_fontsize<span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081016252.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="8-相关图-（Correllogram）"><a href="#8-相关图-（Correllogram）" class="headerlink" title="8 相关图 （Correllogram）"></a>8 相关图 （Correllogram）</h2><p><strong>相关图用于直观地查看给定数据框（或二维数组）中所有可能的数值变量对之间的相关度量</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Dataset</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span>df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>columns<span class="token punctuation">,</span> yticklabels<span class="token operator">=</span>df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>columns<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'RdYlGn'</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Correlogram of mtcars'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081042436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="9-矩阵图-（Pairwise-Plot）"><a href="#9-矩阵图-（Pairwise-Plot）" class="headerlink" title="9 矩阵图 （Pairwise Plot）"></a>9 矩阵图 （Pairwise Plot）</h2><p><strong>矩阵图是探索性分析中的最爱，用于理解所有可能的数值变量对之间的关系</strong>。 它是双变量分析的必备工具。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Load Dataset</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">'iris'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>df<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">"scatter"</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">"species"</span><span class="token punctuation">,</span> plot_kws<span class="token operator">=</span>dict<span class="token punctuation">(</span>s<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081145406.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Load Dataset</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">'iris'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>df<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">"reg"</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">"species"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081230944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="二、偏差-（Deviation）"><a href="#二、偏差-（Deviation）" class="headerlink" title="二、偏差 （Deviation）"></a>二、偏差 （Deviation）</h1><h2 id="10-发散型条形图-（Diverging-Bars）"><a href="#10-发散型条形图-（Diverging-Bars）" class="headerlink" title="10 发散型条形图 （Diverging Bars）"></a>10 发散型条形图 （Diverging Bars）</h2><p>如果您想<strong>根据单个指标查看项目的变化情况，并可视化此差异的顺序和数量</strong>，那么散型条形图 （Diverging Bars） 是一个很好的工具。 它有助于快速区分数据中组的性能，并且非常直观，并且可以立即传达这一点。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>x<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'colors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span> <span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'green'</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'mpg_z'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> color<span class="token operator">=</span>df<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set<span class="token punctuation">(</span>ylabel<span class="token operator">=</span><span class="token string">'$Model$'</span><span class="token punctuation">,</span> xlabel<span class="token operator">=</span><span class="token string">'$Mileage$'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>cars<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Diverging Bars of Car Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081301881.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="11-发散型文本-（Diverging-Texts）"><a href="#11-发散型文本-（Diverging-Texts）" class="headerlink" title="11 发散型文本 （Diverging Texts）"></a>11 发散型文本 （Diverging Texts）</h2><p>发散型文本 （Diverging Texts）与发散型条形图 （Diverging Bars）相似，如果你想<strong>以一种漂亮和可呈现的方式显示图表中每个项目的价值</strong>，就可以使用这种方法。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>x<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'colors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span> <span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'green'</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'mpg_z'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">)</span>
<span class="token keyword">for</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> tex <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">)</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> round<span class="token punctuation">(</span>tex<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'right'</span> <span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'left'</span><span class="token punctuation">,</span>
                 verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'red'</span> <span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations    </span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>cars<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Diverging Text Bars of Car Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081330250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="12-发散型包点图-（Diverging-Dot-Plot）"><a href="#12-发散型包点图-（Diverging-Dot-Plot）" class="headerlink" title="12 发散型包点图 （Diverging Dot Plot）"></a>12 发散型包点图 （Diverging Dot Plot）</h2><p><strong>发散型包点图 （Diverging Dot Plot）也类似于发散型条形图 （Diverging Bars）</strong>。 然而，与发散型条形图 （Diverging Bars）相比，条的缺失减少了组之间的对比度和差异。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>x<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'colors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span> <span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'darkgreen'</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'mpg_z'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">450</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token punctuation">,</span> color<span class="token operator">=</span>df<span class="token punctuation">.</span>colors<span class="token punctuation">)</span>
<span class="token keyword">for</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> tex <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">)</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> round<span class="token punctuation">(</span>tex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>
                 verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'white'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>cars<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Diverging Dotplot of Car Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'$Mileage$'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081359916.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="13-带标记的发散型棒棒糖图-（Diverging-Lollipop-Chart-with-Markers）"><a href="#13-带标记的发散型棒棒糖图-（Diverging-Lollipop-Chart-with-Markers）" class="headerlink" title="13 带标记的发散型棒棒糖图 （Diverging Lollipop Chart with Markers）"></a>13 带标记的发散型棒棒糖图 （Diverging Lollipop Chart with Markers）</h2><p><strong>带标记的棒棒糖图通过强调您想要引起注意的任何重要数据点并在图表中适当地给出推理，提供了一种对差异进行可视化的灵活方式</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'mpg_z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>x<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'colors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'black'</span>

<span class="token comment" spellcheck="true"># color fiat differently</span>
df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>cars <span class="token operator">==</span> <span class="token string">'Fiat X1-9'</span><span class="token punctuation">,</span> <span class="token string">'colors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'darkorange'</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'mpg_z'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>


<span class="token comment" spellcheck="true"># Draw plot</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>patches <span class="token keyword">as</span> patches

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> color<span class="token operator">=</span>df<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mpg_z<span class="token punctuation">,</span> df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> color<span class="token operator">=</span>df<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">600</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'Fiat X1-9'</span> <span class="token keyword">else</span> <span class="token number">300</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">.</span>cars<span class="token punctuation">]</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>cars<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate</span>
plt<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span><span class="token string">'Mercedes Models'</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">11.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xytext<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xycoords<span class="token operator">=</span><span class="token string">'data'</span><span class="token punctuation">,</span>
            fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>
            bbox<span class="token operator">=</span>dict<span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">'square'</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            arrowprops<span class="token operator">=</span>dict<span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">'-[, widthB=2.0, lengthB=1.5'</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'steelblue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Add Patches</span>
p1 <span class="token operator">=</span> patches<span class="token punctuation">.</span>Rectangle<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">)</span>
p2 <span class="token operator">=</span> patches<span class="token punctuation">.</span>Rectangle<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_patch<span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_patch<span class="token punctuation">(</span>p2<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorate</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Diverging Bars of Car Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081425940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="14-面积图-（Area-Chart）"><a href="#14-面积图-（Area-Chart）" class="headerlink" title="14 面积图 （Area Chart）"></a>14 面积图 （Area Chart）</h2><p>通过对轴和线之间的区域进行着色，<strong>面积图不仅强调峰和谷，而且还强调高点和低点的持续时间</strong>。 高点持续时间越长，线下面积越大。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span><span class="token punctuation">,</span> parse_dates<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y_returns <span class="token operator">=</span> <span class="token punctuation">(</span>df<span class="token punctuation">.</span>psavert<span class="token punctuation">.</span>diff<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">/</span>df<span class="token punctuation">.</span>psavert<span class="token punctuation">.</span>shift<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y_returns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> where<span class="token operator">=</span>y_returns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span> interpolate<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y_returns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> where<span class="token operator">=</span>y_returns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> interpolate<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate</span>
plt<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span><span class="token string">'Peak \n1975'</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">94.0</span><span class="token punctuation">,</span> <span class="token number">21.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xytext<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">88.0</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             bbox<span class="token operator">=</span>dict<span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">'square'</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             arrowprops<span class="token operator">=</span>dict<span class="token punctuation">(</span>facecolor<span class="token operator">=</span><span class="token string">'steelblue'</span><span class="token punctuation">,</span> shrink<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>


<span class="token comment" spellcheck="true"># Decorations</span>
xtickvals <span class="token operator">=</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"-"</span><span class="token operator">+</span>str<span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">for</span> y<span class="token punctuation">,</span>m <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>dt<span class="token punctuation">.</span>year<span class="token punctuation">,</span> df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>dt<span class="token punctuation">.</span>month_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span>xtickvals<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'horizontalalignment'</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'verticalalignment'</span><span class="token punctuation">:</span> <span class="token string">'center_baseline'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Month Economics Return %"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Monthly returns %'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081447778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="三、排序-（Ranking）"><a href="#三、排序-（Ranking）" class="headerlink" title="三、排序 （Ranking）"></a>三、排序 （Ranking）</h1><h2 id="15-有序条形图-（Ordered-Bar-Chart）"><a href="#15-有序条形图-（Ordered-Bar-Chart）" class="headerlink" title="15 有序条形图 （Ordered Bar Chart）"></a>15 有序条形图 （Ordered Bar Chart）</h2><p><strong>有序条形图有效地传达了项目的排名顺序</strong>。 但是，在图表上方添加度量标准的值，用户可以从图表本身获取精确信息。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cty'</span><span class="token punctuation">,</span> <span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'cty'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>patches <span class="token keyword">as</span> patches

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate Text</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> cty <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span>i<span class="token punctuation">,</span> cty<span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">,</span> round<span class="token punctuation">(</span>cty<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>


<span class="token comment" spellcheck="true"># Title, Label, Ticks and Ylim</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Bar Chart for Highway Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set<span class="token punctuation">(</span>ylabel<span class="token operator">=</span><span class="token string">'Miles Per Gallon'</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>str<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'right'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Add patches to color the X axis labels</span>
p1 <span class="token operator">=</span> patches<span class="token punctuation">.</span>Rectangle<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">57</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.005</span><span class="token punctuation">)</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">33</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">13</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>fig<span class="token punctuation">.</span>transFigure<span class="token punctuation">)</span>
p2 <span class="token operator">=</span> patches<span class="token punctuation">.</span>Rectangle<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">124</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.005</span><span class="token punctuation">)</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">446</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">13</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>fig<span class="token punctuation">.</span>transFigure<span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221081522229.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="16-棒棒糖图-（Lollipop-Chart）"><a href="#16-棒棒糖图-（Lollipop-Chart）" class="headerlink" title="16 棒棒糖图 （Lollipop Chart）"></a>16 棒棒糖图 （Lollipop Chart）</h2><p>棒棒糖图表以一种视觉上令人愉悦的方式提供与有序条形图类似的目的。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cty'</span><span class="token punctuation">,</span> <span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'cty'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Title, Label, Ticks and Ylim</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Lollipop Chart for Highway Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'Miles Per Gallon'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>str<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'horizontalalignment'</span><span class="token punctuation">:</span> <span class="token string">'right'</span><span class="token punctuation">,</span> <span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>itertuples<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span>row<span class="token punctuation">.</span>Index<span class="token punctuation">,</span> row<span class="token punctuation">.</span>cty<span class="token operator">+</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">,</span> s<span class="token operator">=</span>round<span class="token punctuation">(</span>row<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082242584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="17-包点图-（Dot-Plot）"><a href="#17-包点图-（Dot-Plot）" class="headerlink" title="17 包点图 （Dot Plot）"></a>17 包点图 （Dot Plot）</h2><p><strong>包点图表传达了项目的排名顺序，并且由于它沿水平轴对齐</strong>，因此您可以更容易地看到点彼此之间的距离。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Prepare Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cty'</span><span class="token punctuation">,</span> <span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'cty'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw plot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dashdot'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> x<span class="token operator">=</span>df<span class="token punctuation">.</span>cty<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Title, Label, Ticks and Ylim</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Dot Plot for Highway Mileage'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'Miles Per Gallon'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>str<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'horizontalalignment'</span><span class="token punctuation">:</span> <span class="token string">'right'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlim<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082341761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="18-坡度图-（Slope-Chart）"><a href="#18-坡度图-（Slope-Chart）" class="headerlink" title="18 坡度图 （Slope Chart）"></a>18 坡度图 （Slope Chart）</h2><p><strong>坡度图最适合比较给定人/项目的“前”和“后”位置</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>lines <span class="token keyword">as</span> mlines
<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/gdppercap.csv"</span><span class="token punctuation">)</span>

left_label <span class="token operator">=</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', '</span><span class="token operator">+</span> str<span class="token punctuation">(</span>round<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> c<span class="token punctuation">,</span> y <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">.</span>continent<span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'1952'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
right_label <span class="token operator">=</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', '</span><span class="token operator">+</span> str<span class="token punctuation">(</span>round<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> c<span class="token punctuation">,</span> y <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">.</span>continent<span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'1957'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
klass <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>y1<span class="token operator">-</span>y2<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'green'</span> <span class="token keyword">for</span> y1<span class="token punctuation">,</span> y2 <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'1952'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'1957'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># draw line</span>
<span class="token comment" spellcheck="true"># https://stackoverflow.com/questions/36470343/how-to-draw-a-line-with-matplotlib/36479941</span>
<span class="token keyword">def</span> <span class="token function">newline</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    l <span class="token operator">=</span> mlines<span class="token punctuation">.</span>Line2D<span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span> <span class="token keyword">if</span> p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'green'</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">,</span> markersize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_line<span class="token punctuation">(</span>l<span class="token punctuation">)</span>
    <span class="token keyword">return</span> l

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Vertical Lines</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">13000</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">13000</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Points</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'1952'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token operator">=</span>np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'1957'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token operator">=</span>np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Line Segmentsand Annotation</span>
<span class="token keyword">for</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> c <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'1952'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'1957'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'continent'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    newline<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>p1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span>p2<span class="token punctuation">]</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">0.05</span><span class="token punctuation">,</span> p1<span class="token punctuation">,</span> c <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>round<span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'right'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">0.05</span><span class="token punctuation">,</span> p2<span class="token punctuation">,</span> c <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>round<span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 'Before' and 'After' Annotations</span>
ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token string">'BEFORE'</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'right'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'weight'</span><span class="token punctuation">:</span><span class="token number">700</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token string">'AFTER'</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'weight'</span><span class="token punctuation">:</span><span class="token number">700</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Slopechart: Comparing GDP Per Capita between 1952 vs 1957"</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">14000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Mean GDP Per Capita'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"1952"</span><span class="token punctuation">,</span> <span class="token string">"1957"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108242466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="19-哑铃图-（Dumbbell-Plot）"><a href="#19-哑铃图-（Dumbbell-Plot）" class="headerlink" title="19 哑铃图 （Dumbbell Plot）"></a>19 哑铃图 （Dumbbell Plot）</h2><p><strong>哑铃图表传达了各种项目的“前”和“后”位置以及项目的等级排序</strong>。 如果您想要将特定项目/计划对不同对象的影响可视化，那么它非常有用。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>lines <span class="token keyword">as</span> mlines

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/health.csv"</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'pct_2014'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Func to draw line segment</span>
<span class="token keyword">def</span> <span class="token function">newline</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    l <span class="token operator">=</span> mlines<span class="token punctuation">.</span>Line2D<span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'skyblue'</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_line<span class="token punctuation">(</span>l<span class="token punctuation">)</span>
    <span class="token keyword">return</span> l

<span class="token comment" spellcheck="true"># Figure and Axes</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'#f7f7f7'</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Vertical Lines</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">05</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">10</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">15</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">20</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dotted'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Points</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'pct_2013'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#0e668b'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'pct_2014'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#a3c4dc'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Line Segments</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> p2 <span class="token keyword">in</span> zip<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'pct_2013'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'pct_2014'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    newline<span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>p2<span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
ax<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span><span class="token string">'#f7f7f7'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Dumbell Chart: Pct Change - 2013 vs 2014"</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set<span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Mean GDP Per Capita'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token number">05</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'5%'</span><span class="token punctuation">,</span> <span class="token string">'15%'</span><span class="token punctuation">,</span> <span class="token string">'20%'</span><span class="token punctuation">,</span> <span class="token string">'25%'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'5%'</span><span class="token punctuation">,</span> <span class="token string">'15%'</span><span class="token punctuation">,</span> <span class="token string">'20%'</span><span class="token punctuation">,</span> <span class="token string">'25%'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082452153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四、分布-（Distribution）"><a href="#四、分布-（Distribution）" class="headerlink" title="四、分布 （Distribution）"></a>四、分布 （Distribution）</h1><h2 id="20-连续变量的直方图-（Histogram-for-Continuous-Variable）"><a href="#20-连续变量的直方图-（Histogram-for-Continuous-Variable）" class="headerlink" title="20 连续变量的直方图 （Histogram for Continuous Variable）"></a>20 连续变量的直方图 （Histogram for Continuous Variable）</h2><p>直方图显示给定变量的频率分布。 下面的图<strong>表示基于类型变量对频率条进行分组，从而更好地了解连续变量和类型变量</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare data</span>
x_var <span class="token operator">=</span> <span class="token string">'displ'</span>
groupby_var <span class="token operator">=</span> <span class="token string">'class'</span>
df_agg <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>x_var<span class="token punctuation">,</span> groupby_var<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>groupby_var<span class="token punctuation">)</span>
vals <span class="token operator">=</span> <span class="token punctuation">[</span>df<span class="token punctuation">[</span>x_var<span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> df <span class="token keyword">in</span> df_agg<span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
n<span class="token punctuation">,</span> bins<span class="token punctuation">,</span> patches <span class="token operator">=</span> plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>vals<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> stacked<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span><span class="token punctuation">:</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">{</span>group<span class="token punctuation">:</span>col <span class="token keyword">for</span> group<span class="token punctuation">,</span> col <span class="token keyword">in</span> zip<span class="token punctuation">(</span>np<span class="token punctuation">.</span>unique<span class="token punctuation">(</span>df<span class="token punctuation">[</span>groupby_var<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> colors<span class="token punctuation">[</span><span class="token punctuation">:</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>f<span class="token string">"Stacked Histogram of ${x_var}$ colored by ${groupby_var}$"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>x_var<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Frequency"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>ticks<span class="token operator">=</span>bins<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token punctuation">[</span>round<span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> b <span class="token keyword">in</span> bins<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082525451.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="21-类型变量的直方图-（Histogram-for-Categorical-Variable）"><a href="#21-类型变量的直方图-（Histogram-for-Categorical-Variable）" class="headerlink" title="21 类型变量的直方图 （Histogram for Categorical Variable）"></a>21 类型变量的直方图 （Histogram for Categorical Variable）</h2><p><strong>类型变量的直方图显示该变量的频率分布</strong>。 通过对条形图进行着色，可以将分布与表示颜色的另一个类型变量相关联。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare data</span>
x_var <span class="token operator">=</span> <span class="token string">'manufacturer'</span>
groupby_var <span class="token operator">=</span> <span class="token string">'class'</span>
df_agg <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>x_var<span class="token punctuation">,</span> groupby_var<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>groupby_var<span class="token punctuation">)</span>
vals <span class="token operator">=</span> <span class="token punctuation">[</span>df<span class="token punctuation">[</span>x_var<span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> df <span class="token keyword">in</span> df_agg<span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
n<span class="token punctuation">,</span> bins<span class="token punctuation">,</span> patches <span class="token operator">=</span> plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>vals<span class="token punctuation">,</span> df<span class="token punctuation">[</span>x_var<span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__len__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stacked<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span><span class="token punctuation">:</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">{</span>group<span class="token punctuation">:</span>col <span class="token keyword">for</span> group<span class="token punctuation">,</span> col <span class="token keyword">in</span> zip<span class="token punctuation">(</span>np<span class="token punctuation">.</span>unique<span class="token punctuation">(</span>df<span class="token punctuation">[</span>groupby_var<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> colors<span class="token punctuation">[</span><span class="token punctuation">:</span>len<span class="token punctuation">(</span>vals<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>f<span class="token string">"Stacked Histogram of ${x_var}$ colored by ${groupby_var}$"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>x_var<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Frequency"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>ticks<span class="token operator">=</span>bins<span class="token punctuation">,</span> labels<span class="token operator">=</span>np<span class="token punctuation">.</span>unique<span class="token punctuation">(</span>df<span class="token punctuation">[</span>x_var<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082549768.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="22-密度图-（Density-Plot）"><a href="#22-密度图-（Density-Plot）" class="headerlink" title="22 密度图 （Density Plot）"></a>22 密度图 （Density Plot）</h2><p><strong>密度图是一种常用工具，用于可视化连续变量的分布</strong>。 通过“响应”变量对它们进行分组，您可以检查 X 和 Y 之间的关系。以下情况用于表示目的，以描述城市里程的分布如何随着汽缸数的变化而变化。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cyl'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"g"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Cyl=4"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cyl'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"deeppink"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Cyl=5"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cyl'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"dodgerblue"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Cyl=6"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cyl'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"orange"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Cyl=8"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Density Plot of City Mileage by n_Cylinders'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082613376.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="23-直方密度线图-（Density-Curves-with-Histogram）"><a href="#23-直方密度线图-（Density-Curves-with-Histogram）" class="headerlink" title="23 直方密度线图 （Density Curves with Histogram）"></a>23 直方密度线图 （Density Curves with Histogram）</h2><p><strong>带有直方图的密度曲线汇集了两个图所传达的集体信息</strong>，因此您可以将它们放在一个图中而不是两个图中。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'compact'</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"dodgerblue"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Compact"</span><span class="token punctuation">,</span> hist_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'alpha'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span> kde_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'linewidth'</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'suv'</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"orange"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"SUV"</span><span class="token punctuation">,</span> hist_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'alpha'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span> kde_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'linewidth'</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'minivan'</span><span class="token punctuation">,</span> <span class="token string">"cty"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"g"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"minivan"</span><span class="token punctuation">,</span> hist_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'alpha'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span> kde_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'linewidth'</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.35</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Density Plot of City Mileage by Vehicle Type'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082639128.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="24-Joy-Plot"><a href="#24-Joy-Plot" class="headerlink" title="24 Joy Plot"></a>24 Joy Plot</h2><p><strong>Joy Plot允许不同组的密度曲线重叠，这是一种可视化大量分组数据的彼此关系分布的好方法</strong>。 它看起来很悦目，并清楚地传达了正确的信息。 它可以使用基于 matplotlib 的 joypy 包轻松构建。 （『Python数据之道』注：需要安装 joypy 库）</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 导入资源包：pip install joypy</span>

<span class="token keyword">import</span> joypy

<span class="token comment" spellcheck="true"># Import Data</span>
mpg <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> joypy<span class="token punctuation">.</span>joyplot<span class="token punctuation">(</span>mpg<span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> <span class="token string">'cty'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> by<span class="token operator">=</span><span class="token string">"class"</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token string">'own'</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Joy Plot of City and Highway Mileage by Class'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082730234.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="25-分布式包点图-（Distributed-Dot-Plot）"><a href="#25-分布式包点图-（Distributed-Dot-Plot）" class="headerlink" title="25 分布式包点图 （Distributed Dot Plot）"></a>25 分布式包点图 （Distributed Dot Plot）</h2><p><strong>分布式包点图显示按组分割的点的单变量分布</strong>。 点数越暗，该区域的数据点集中度越高。 通过对中位数进行不同着色，组的真实定位立即变得明显。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>patches <span class="token keyword">as</span> mpatches

<span class="token comment" spellcheck="true"># Prepare Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>
cyl_colors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token string">'tab:green'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">:</span><span class="token string">'tab:blue'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">:</span><span class="token string">'tab:orange'</span><span class="token punctuation">}</span>
df_raw<span class="token punctuation">[</span><span class="token string">'cyl_color'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>cyl<span class="token punctuation">.</span>map<span class="token punctuation">(</span>cyl_colors<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Mean and Median city mileage by make</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cty'</span><span class="token punctuation">,</span> <span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'cty'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
df_median <span class="token operator">=</span> df_raw<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cty'</span><span class="token punctuation">,</span> <span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw horizontal lines</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token operator">=</span>df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'dashdot'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw the Dots</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> make <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    df_make <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df_raw<span class="token punctuation">.</span>manufacturer<span class="token operator">==</span>make<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span>i<span class="token punctuation">,</span> df_make<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'cty'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df_make<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token operator">=</span>i<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'cty'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df_median<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df_median<span class="token punctuation">.</span>index<span class="token operator">==</span>make<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate    </span>
ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">"$red \; dots \; are \; the \: median$"</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
red_patch <span class="token operator">=</span> plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">"o"</span><span class="token punctuation">,</span> ms<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> ls<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> mec<span class="token operator">=</span>None<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Median"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>handles<span class="token operator">=</span>red_patch<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Distribution of City Mileage by Make'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'Miles Per Gallon (City)'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span>df<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span>df<span class="token punctuation">.</span>manufacturer<span class="token punctuation">.</span>str<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'horizontalalignment'</span><span class="token punctuation">:</span> <span class="token string">'right'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlim<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_visible<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_visible<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_visible<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_visible<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>   
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">4</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082803532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="26-箱形图-（Box-Plot）"><a href="#26-箱形图-（Box-Plot）" class="headerlink" title="26 箱形图 （Box Plot）"></a>26 箱形图 （Box Plot）</h2><p><strong>箱形图是一种可视化分布的好方法，记住中位数、第25个第45个四分位数和异常值</strong>。 但是，您需要注意解释可能会扭曲该组中包含的点数的框的大小。 因此，手动提供每个框中的观察数量可以帮助克服这个缺点。</p>
<p>例如，左边的前两个框具有相同大小的框，即使它们的值分别是5和47。 因此，写入该组中的观察数量是必要的。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'class'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> notch<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Add N Obs inside boxplot (optional)</span>
<span class="token keyword">def</span> <span class="token function">add_n_obs</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span>group_col<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    medians_dict <span class="token operator">=</span> <span class="token punctuation">{</span>grp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>grp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> grp <span class="token keyword">in</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>group_col<span class="token punctuation">)</span><span class="token punctuation">}</span>
    xticklabels <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_xticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    n_obs <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>group_col<span class="token punctuation">)</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values
    <span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> xticklabel<span class="token punctuation">)</span><span class="token punctuation">,</span> n_ob <span class="token keyword">in</span> zip<span class="token punctuation">(</span>enumerate<span class="token punctuation">(</span>xticklabels<span class="token punctuation">)</span><span class="token punctuation">,</span> n_obs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token punctuation">,</span> medians_dict<span class="token punctuation">[</span>xticklabel<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">1.01</span><span class="token punctuation">,</span> <span class="token string">"#obs : "</span><span class="token operator">+</span>str<span class="token punctuation">(</span>n_ob<span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>

add_n_obs<span class="token punctuation">(</span>df<span class="token punctuation">,</span>group_col<span class="token operator">=</span><span class="token string">'class'</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">)</span>    

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Box Plot of Highway Mileage by Vehicle Class'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082835361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="27-包点-箱形图-（Dot-Box-Plot）"><a href="#27-包点-箱形图-（Dot-Box-Plot）" class="headerlink" title="27 包点+箱形图 （Dot + Box Plot）"></a>27 包点+箱形图 （Dot + Box Plot）</h2><p><strong>包点+箱形图 （Dot + Box Plot）传达类似于分组的箱形图信息</strong>。 此外，这些点可以了解每组中有多少数据点。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'class'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cyl'</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'class'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> jitter<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">'solid'</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Box Plot of Highway Mileage by Vehicle Class'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Cylinders'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108285893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="28-小提琴图-（Violin-Plot）"><a href="#28-小提琴图-（Violin-Plot）" class="headerlink" title="28 小提琴图 （Violin Plot）"></a>28 小提琴图 （Violin Plot）</h2><p><strong>小提琴图是箱形图在视觉上令人愉悦的替代品</strong>。 小提琴的形状或面积取决于它所持有的观察次数。 但是，小提琴图可能更难以阅读，并且在专业设置中不常用。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'class'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'hwy'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token string">'width'</span><span class="token punctuation">,</span> inner<span class="token operator">=</span><span class="token string">'quartile'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Violin Plot of Highway Mileage by Vehicle Class'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082921620.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="29-人口金字塔-（Population-Pyramid）"><a href="#29-人口金字塔-（Population-Pyramid）" class="headerlink" title="29 人口金字塔 （Population Pyramid）"></a>29 人口金字塔 （Population Pyramid）</h2><p><strong>人口金字塔可用于显示由数量排序的组的分布</strong>。 或者它也可以用于显示人口的逐级过滤，因为它在下面用于显示有多少人通过营销渠道的每个阶段。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Read data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/email_campaign_funnel.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
group_col <span class="token operator">=</span> <span class="token string">'Gender'</span>
order_of_bars <span class="token operator">=</span> df<span class="token punctuation">.</span>Stage<span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>df<span class="token punctuation">[</span>group_col<span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>df<span class="token punctuation">[</span>group_col<span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> c<span class="token punctuation">,</span> group <span class="token keyword">in</span> zip<span class="token punctuation">(</span>colors<span class="token punctuation">,</span> df<span class="token punctuation">[</span>group_col<span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'Users'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'Stage'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span>group_col<span class="token punctuation">]</span><span class="token operator">==</span>group<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> order<span class="token operator">=</span>order_of_bars<span class="token punctuation">,</span> color<span class="token operator">=</span>c<span class="token punctuation">,</span> label<span class="token operator">=</span>group<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations    </span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"$Users$"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Stage of Purchase"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Population Pyramid of the Marketing Funnel"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221082943341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="30-分类图-（Categorical-Plots）"><a href="#30-分类图-（Categorical-Plots）" class="headerlink" title="30 分类图 （Categorical Plots）"></a>30 分类图 （Categorical Plots）</h2><p>由 seaborn库 提供的分类图可用于可视化彼此相关的2个或更多分类变量的计数分布。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Load Dataset</span>
titanic <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">"titanic"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>catplot<span class="token punctuation">(</span><span class="token string">"alive"</span><span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">"deck"</span><span class="token punctuation">,</span> col_wrap<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>
                data<span class="token operator">=</span>titanic<span class="token punctuation">[</span>titanic<span class="token punctuation">.</span>deck<span class="token punctuation">.</span>notnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                kind<span class="token operator">=</span><span class="token string">"count"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">3.5</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">,</span>
                palette<span class="token operator">=</span><span class="token string">'tab20'</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>suptitle<span class="token punctuation">(</span><span class="token string">'sf'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083007882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Load Dataset</span>
titanic <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">"titanic"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
sns<span class="token punctuation">.</span>catplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">"age"</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">"embark_town"</span><span class="token punctuation">,</span>
            hue<span class="token operator">=</span><span class="token string">"sex"</span><span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">"class"</span><span class="token punctuation">,</span>
            data<span class="token operator">=</span>titanic<span class="token punctuation">[</span>titanic<span class="token punctuation">.</span>embark_town<span class="token punctuation">.</span>notnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">"h"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">"tab10"</span><span class="token punctuation">,</span>
            kind<span class="token operator">=</span><span class="token string">"violin"</span><span class="token punctuation">,</span> dodge<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cut<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> bw<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083024217.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="五、组成-（Composition）"><a href="#五、组成-（Composition）" class="headerlink" title="五、组成 （Composition）"></a>五、组成 （Composition）</h1><h2 id="31-华夫饼图-（Waffle-Chart）"><a href="#31-华夫饼图-（Waffle-Chart）" class="headerlink" title="31 华夫饼图 （Waffle Chart）"></a>31 华夫饼图 （Waffle Chart）</h2><p><strong>可以使用 pywaffle包 创建华夫饼图，并用于显示更大群体中的组的组成</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#导入资源库：pip install pywaffle</span>
<span class="token comment" spellcheck="true"># Reference: https://stackoverflow.com/questions/41400136/how-to-do-waffle-charts-in-python-square-piechart</span>
<span class="token keyword">from</span> pywaffle <span class="token keyword">import</span> Waffle

<span class="token comment" spellcheck="true"># Import</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts'</span><span class="token punctuation">)</span>
n_categories <span class="token operator">=</span> df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>inferno_r<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw Plot and Decorate</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>
    FigureClass<span class="token operator">=</span>Waffle<span class="token punctuation">,</span>
    plots<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token string">'111'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'values'</span><span class="token punctuation">:</span> df<span class="token punctuation">[</span><span class="token string">'counts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'labels'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"{0} ({1})"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'counts'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>itertuples<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'legend'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'upper left'</span><span class="token punctuation">,</span> <span class="token string">'bbox_to_anchor'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1.05</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'# Vehicles by Class'</span><span class="token punctuation">,</span> <span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rows<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
    colors<span class="token operator">=</span>colors<span class="token punctuation">,</span>
    figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083126788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#导入资源包：pip install pywaffle</span>
<span class="token keyword">from</span> pywaffle <span class="token keyword">import</span> Waffle

<span class="token comment" spellcheck="true"># Import</span>
<span class="token comment" spellcheck="true"># df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
<span class="token comment" spellcheck="true"># By Class Data</span>
df_class <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts_class'</span><span class="token punctuation">)</span>
n_categories <span class="token operator">=</span> df_class<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
colors_class <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Set3<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># By Cylinders Data</span>
df_cyl <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'cyl'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts_cyl'</span><span class="token punctuation">)</span>
n_categories <span class="token operator">=</span> df_cyl<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
colors_cyl <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># By Make Data</span>
df_make <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts_make'</span><span class="token punctuation">)</span>
n_categories <span class="token operator">=</span> df_make<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
colors_make <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>tab20b<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_categories<span class="token punctuation">)</span><span class="token punctuation">]</span>


<span class="token comment" spellcheck="true"># Draw Plot and Decorate</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>
    FigureClass<span class="token operator">=</span>Waffle<span class="token punctuation">,</span>
    plots<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token string">'311'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'values'</span><span class="token punctuation">:</span> df_class<span class="token punctuation">[</span><span class="token string">'counts_class'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'labels'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"{1}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> df_class<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'counts_class'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>itertuples<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'legend'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'upper left'</span><span class="token punctuation">,</span> <span class="token string">'bbox_to_anchor'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1.05</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">'Class'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'# Vehicles by Class'</span><span class="token punctuation">,</span> <span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'colors'</span><span class="token punctuation">:</span> colors_class
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'312'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'values'</span><span class="token punctuation">:</span> df_cyl<span class="token punctuation">[</span><span class="token string">'counts_cyl'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'labels'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"{1}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> df_cyl<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cyl'</span><span class="token punctuation">,</span> <span class="token string">'counts_cyl'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>itertuples<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'legend'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'upper left'</span><span class="token punctuation">,</span> <span class="token string">'bbox_to_anchor'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1.05</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">'Cyl'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'# Vehicles by Cyl'</span><span class="token punctuation">,</span> <span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'colors'</span><span class="token punctuation">:</span> colors_cyl
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'313'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'values'</span><span class="token punctuation">:</span> df_make<span class="token punctuation">[</span><span class="token string">'counts_make'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'labels'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"{1}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> df_make<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'manufacturer'</span><span class="token punctuation">,</span> <span class="token string">'counts_make'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>itertuples<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'legend'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'upper left'</span><span class="token punctuation">,</span> <span class="token string">'bbox_to_anchor'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1.05</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">'Manufacturer'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'# Vehicles by Make'</span><span class="token punctuation">,</span> <span class="token string">'loc'</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'colors'</span><span class="token punctuation">:</span> colors_make
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rows<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span>
    figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083205999.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="32-饼图-（Pie-Chart）"><a href="#32-饼图-（Pie-Chart）" class="headerlink" title="32 饼图 （Pie Chart）"></a>32 饼图 （Pie Chart）</h2><p>饼图是显示组成的经典方式。 然而，现在通常不建议使用它，因为馅饼部分的面积有时会变得误导。 因此，<strong>如果您要使用饼图，强烈建议明确记下饼图每个部分的百分比或数字</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Make the plot with pandas</span>
df<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'pie'</span><span class="token punctuation">,</span> subplots<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Pie Chart of Vehicle Class - Bad"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083242320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subplot_kw<span class="token operator">=</span>dict<span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">"equal"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>

data <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'counts'</span><span class="token punctuation">]</span>
categories <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
explode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>pct<span class="token punctuation">,</span> allvals<span class="token punctuation">)</span><span class="token punctuation">:</span>
    absolute <span class="token operator">=</span> int<span class="token punctuation">(</span>pct<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">.</span><span class="token operator">*</span>np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span>allvals<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"{:.1f}% ({:d} )"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>pct<span class="token punctuation">,</span> absolute<span class="token punctuation">)</span>

wedges<span class="token punctuation">,</span> texts<span class="token punctuation">,</span> autotexts <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>data<span class="token punctuation">,</span>
                                  autopct<span class="token operator">=</span><span class="token keyword">lambda</span> pct<span class="token punctuation">:</span> func<span class="token punctuation">(</span>pct<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                  textprops<span class="token operator">=</span>dict<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                  colors<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Dark2<span class="token punctuation">.</span>colors<span class="token punctuation">,</span>
                                 startangle<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>
                                 explode<span class="token operator">=</span>explode<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>wedges<span class="token punctuation">,</span> categories<span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">"Vehicle Class"</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">"center left"</span><span class="token punctuation">,</span> bbox_to_anchor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>setp<span class="token punctuation">(</span>autotexts<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> weight<span class="token operator">=</span><span class="token number">700</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Class of Vehicles: Pie Chart"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083300801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="33-树形图-（Treemap）"><a href="#33-树形图-（Treemap）" class="headerlink" title="33 树形图 （Treemap）"></a>33 树形图 （Treemap）</h2><p>树形图类似于饼图，<strong>它可以更好地完成工作而不会误导每个组的贡献</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 导入资源包：pip install squarify</span>
<span class="token keyword">import</span> squarify

<span class="token comment" spellcheck="true"># Import Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts'</span><span class="token punctuation">)</span>
labels <span class="token operator">=</span> df<span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> str<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n ("</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
sizes <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'counts'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">(</span>i<span class="token operator">/</span>float<span class="token punctuation">(</span>len<span class="token punctuation">(</span>labels<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>labels<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
squarify<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>sizes<span class="token operator">=</span>sizes<span class="token punctuation">,</span> label<span class="token operator">=</span>labels<span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorate</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Treemap of Vechile Class'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083341493.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="34-条形图-（Bar-Chart）"><a href="#34-条形图-（Bar-Chart）" class="headerlink" title="34 条形图 （Bar Chart）"></a>34 条形图 （Bar Chart）</h2><p><strong>条形图是基于计数或任何给定指标可视化项目的经典方式</strong>。 在下面的图表中，我为每个项目使用了不同的颜色，但您通常可能希望为所有项目选择一种颜色，除非您按组对其进行着色。 颜色名称存储在下面代码中的all_colors中。 您可以通过在<code>plt.plot（）</code>中设置颜色参数来更改条的颜色。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> random

<span class="token comment" spellcheck="true"># Import Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
df <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'manufacturer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'counts'</span><span class="token punctuation">)</span>
n <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__len__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span>
all_colors <span class="token operator">=</span> list<span class="token punctuation">(</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>cnames<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> random<span class="token punctuation">.</span>choices<span class="token punctuation">(</span>all_colors<span class="token punctuation">,</span> k<span class="token operator">=</span>n<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot Bars</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'counts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>c<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> val <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'counts'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>i<span class="token punctuation">,</span> val<span class="token punctuation">,</span> float<span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> verticalalignment<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontweight'</span><span class="token punctuation">:</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'manufacturer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Number of Vehicles by Manaufacturers"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'# Vehicles'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083428170.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="六、变化-（Change）"><a href="#六、变化-（Change）" class="headerlink" title="六、变化 （Change）"></a>六、变化 （Change）</h1><h2 id="35-时间序列图-（Time-Series-Plot）"><a href="#35-时间序列图-（Time-Series-Plot）" class="headerlink" title="35 时间序列图 （Time Series Plot）"></a>35 时间序列图 （Time Series Plot）</h2><p><strong>时间序列图用于显示给定度量随时间变化的方式</strong>。 在这里，您可以看到 1949年 至 1969年间航空客运量的变化情况。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token string">'traffic'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:red'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">750</span><span class="token punctuation">)</span>
xtick_location <span class="token operator">=</span> df<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span>
xtick_labels <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>ticks<span class="token operator">=</span>xtick_location<span class="token punctuation">,</span> labels<span class="token operator">=</span>xtick_labels<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Air Passengers Traffic (1949 - 1969)"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Remove borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span>   
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083454315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="36-带波峰波谷标记的时序图-（Time-Series-with-Peaks-and-Troughs-Annotated）"><a href="#36-带波峰波谷标记的时序图-（Time-Series-with-Peaks-and-Troughs-Annotated）" class="headerlink" title="36 带波峰波谷标记的时序图 （Time Series with Peaks and Troughs Annotated）"></a>36 带波峰波谷标记的时序图 （Time Series with Peaks and Troughs Annotated）</h2><p>下面的时间序列绘制了所有峰值和低谷，并注释了所选特殊事件的发生。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Get the Peaks and Troughs</span>
data <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'traffic'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
doublediff <span class="token operator">=</span> np<span class="token punctuation">.</span>diff<span class="token punctuation">(</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>np<span class="token punctuation">.</span>diff<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
peak_locations <span class="token operator">=</span> np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>doublediff <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>

doublediff2 <span class="token operator">=</span> np<span class="token punctuation">.</span>diff<span class="token punctuation">(</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>np<span class="token punctuation">.</span>diff<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
trough_locations <span class="token operator">=</span> np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>doublediff2 <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token string">'traffic'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:blue'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Air Traffic'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>peak_locations<span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>traffic<span class="token punctuation">[</span>peak_locations<span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token operator">=</span>mpl<span class="token punctuation">.</span>markers<span class="token punctuation">.</span>CARETUPBASE<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:green'</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Peaks'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>trough_locations<span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>traffic<span class="token punctuation">[</span>trough_locations<span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token operator">=</span>mpl<span class="token punctuation">.</span>markers<span class="token punctuation">.</span>CARETDOWNBASE<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Troughs'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Annotate</span>
<span class="token keyword">for</span> t<span class="token punctuation">,</span> p <span class="token keyword">in</span> zip<span class="token punctuation">(</span>trough_locations<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> peak_locations<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>traffic<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'darkgreen'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>traffic<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">35</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>date<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'darkred'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">)</span>
xtick_location <span class="token operator">=</span> df<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>
xtick_labels <span class="token operator">=</span> df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>ticks<span class="token operator">=</span>xtick_location<span class="token punctuation">,</span> labels<span class="token operator">=</span>xtick_labels<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Peak and Troughs of Air Passengers Traffic (1949 - 1969)"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'upper left'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083520607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="37-自相关和部分自相关图-（Autocorrelation-ACF-and-Partial-Autocorrelation-PACF-Plot）"><a href="#37-自相关和部分自相关图-（Autocorrelation-ACF-and-Partial-Autocorrelation-PACF-Plot）" class="headerlink" title="37 自相关和部分自相关图 （Autocorrelation (ACF) and Partial Autocorrelation (PACF) Plot）"></a>37 自相关和部分自相关图 （Autocorrelation (ACF) and Partial Autocorrelation (PACF) Plot）</h2><p><strong>自相关图（ACF图）显示时间序列与其自身滞后的相关性</strong>。 每条垂直线（在自相关图上）表示系列与滞后0之间的滞后之间的相关性。图中的蓝色阴影区域是显着性水平。 那些位于蓝线之上的滞后是显着的滞后。</p>
<p>对于空乘旅客，我们看到多达14个滞后跨越蓝线，因此非常重要。 这意味着，14年前的航空旅客交通量对今天的交通状况有影响。</p>
<p>PACF在另一方面显示了任何给定滞后（时间序列）与当前序列的自相关，但是删除了滞后的贡献。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>tsaplots <span class="token keyword">import</span> plot_acf<span class="token punctuation">,</span> plot_pacf

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
fig<span class="token punctuation">,</span> <span class="token punctuation">(</span>ax1<span class="token punctuation">,</span> ax2<span class="token punctuation">)</span> <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plot_acf<span class="token punctuation">(</span>df<span class="token punctuation">.</span>traffic<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax1<span class="token punctuation">,</span> lags<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
plot_pacf<span class="token punctuation">(</span>df<span class="token punctuation">.</span>traffic<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax2<span class="token punctuation">,</span> lags<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorate</span>
<span class="token comment" spellcheck="true"># lighten the borders</span>
ax1<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ax2<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ax2<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ax2<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ax2<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># font size of tick labels</span>
ax1<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span> labelsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span> labelsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083605100.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="38-交叉相关图-（Cross-Correlation-plot）"><a href="#38-交叉相关图-（Cross-Correlation-plot）" class="headerlink" title="38 交叉相关图 （Cross Correlation plot）"></a>38 交叉相关图 （Cross Correlation plot）</h2><p><strong>交叉相关图显示了两个时间序列相互之间的滞后</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>stattools <span class="token keyword">as</span> stattools

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/mortality.csv'</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'mdeaths'</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'fdeaths'</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Compute Cross Correlations</span>
ccs <span class="token operator">=</span> stattools<span class="token punctuation">.</span>ccf<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">]</span>
nlags <span class="token operator">=</span> len<span class="token punctuation">(</span>ccs<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Compute the Significance level</span>
<span class="token comment" spellcheck="true"># ref: https://stats.stackexchange.com/questions/3115/cross-correlation-significance-in-r/3128#3128</span>
conf_level <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>nlags<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 0 axis</span>
plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>conf_level<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span><span class="token operator">-</span>conf_level<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">=</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>len<span class="token punctuation">(</span>ccs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> height<span class="token operator">=</span>ccs<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'$Cross\; Correlation\; Plot:\; mdeaths\; vs\; fdeaths$'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">(</span>ccs<span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083632736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="39-时间序列分解图-（Time-Series-Decomposition-Plot）"><a href="#39-时间序列分解图-（Time-Series-Decomposition-Plot）" class="headerlink" title="39 时间序列分解图 （Time Series Decomposition Plot）"></a>39 时间序列分解图 （Time Series Decomposition Plot）</h2><p><strong>时间序列分解图显示时间序列分解为趋势，季节和残差分量</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>seasonal <span class="token keyword">import</span> seasonal_decompose
<span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span><span class="token punctuation">)</span>
dates <span class="token operator">=</span> pd<span class="token punctuation">.</span>DatetimeIndex<span class="token punctuation">(</span><span class="token punctuation">[</span>parse<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-01'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span>dates<span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decompose</span>
result <span class="token operator">=</span> seasonal_decompose<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'traffic'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">'multiplicative'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'figure.figsize'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>suptitle<span class="token punctuation">(</span><span class="token string">'Time Series Decomposition of Air Passengers'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083654418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="40-多个时间序列-（Multiple-Time-Series）"><a href="#40-多个时间序列-（Multiple-Time-Series）" class="headerlink" title="40 多个时间序列 （Multiple Time Series）"></a>40 多个时间序列 （Multiple Time Series）</h2><p>您可以绘制多个时间序列，在同一图表上测量相同的值，如下所示。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/mortality.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Define the upper limit, lower limit, interval of Y axis and colors</span>
y_LL <span class="token operator">=</span> <span class="token number">100</span>
y_UL <span class="token operator">=</span> int<span class="token punctuation">(</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>max<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>max<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1.1</span><span class="token punctuation">)</span>
y_interval <span class="token operator">=</span> <span class="token number">400</span>
mycolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> <span class="token string">'tab:blue'</span><span class="token punctuation">,</span> <span class="token string">'tab:green'</span><span class="token punctuation">,</span> <span class="token string">'tab:orange'</span><span class="token punctuation">]</span>    

<span class="token comment" spellcheck="true"># Draw Plot and Annotate</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>    

columns <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  
<span class="token keyword">for</span> i<span class="token punctuation">,</span> column <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>columns<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true"># 原文此处有误，Python数据之道 备注</span>
    <span class="token comment" spellcheck="true"># 访问 liyangbit.com ， 查看本文完整内容</span>
    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>values<span class="token punctuation">,</span> df<span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> column<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Tick lines  </span>
<span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span>y_LL<span class="token punctuation">,</span> y_UL<span class="token punctuation">,</span> y_interval<span class="token punctuation">)</span><span class="token punctuation">:</span>    
    plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">71</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations    </span>
plt<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">"both"</span><span class="token punctuation">,</span> which<span class="token operator">=</span><span class="token string">"both"</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>    
                labelbottom<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> labelleft<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Number of Deaths from Lung Diseases in the UK (1974-1979)'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>range<span class="token punctuation">(</span>y_LL<span class="token punctuation">,</span> y_UL<span class="token punctuation">,</span> y_interval<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span>y_LL<span class="token punctuation">,</span> y_UL<span class="token punctuation">,</span> y_interval<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>date<span class="token punctuation">.</span>values<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span>y_LL<span class="token punctuation">,</span> y_UL<span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/202012210838017.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="41-使用辅助-Y-轴来绘制不同范围的图形-（Plotting-with-different-scales-using-secondary-Y-axis）"><a href="#41-使用辅助-Y-轴来绘制不同范围的图形-（Plotting-with-different-scales-using-secondary-Y-axis）" class="headerlink" title="41 使用辅助 Y 轴来绘制不同范围的图形 （Plotting with different scales using secondary Y axis）"></a>41 使用辅助 Y 轴来绘制不同范围的图形 （Plotting with different scales using secondary Y axis）</h2><p>如果要显示在同一时间点测量两个不同数量的两个时间序列，则可以在右侧的辅助Y轴上再绘制第二个系列。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span>
y1 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'psavert'</span><span class="token punctuation">]</span>
y2 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'unemploy'</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Plot Line1 (Left Y Axis)</span>
fig<span class="token punctuation">,</span> ax1 <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:red'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot Line2 (Right Y Axis)</span>
ax2 <span class="token operator">=</span> ax1<span class="token punctuation">.</span>twinx<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># instantiate a second axes that shares the same x-axis</span>
ax2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:blue'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
<span class="token comment" spellcheck="true"># ax1 (left Y axis)</span>
ax1<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'Year'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> labelsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'Personal Savings Rate'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> labelcolor<span class="token operator">=</span><span class="token string">'tab:red'</span> <span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># ax2 (right Y axis)</span>
ax2<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"# Unemployed (1000's)"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'tab:blue'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> labelcolor<span class="token operator">=</span><span class="token string">'tab:blue'</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Personal Savings Rate vs Unemployed: Plotting in Secondary Y Axis"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083824136.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="42-带有误差带的时间序列-（Time-Series-with-Error-Bands）"><a href="#42-带有误差带的时间序列-（Time-Series-with-Error-Bands）" class="headerlink" title="42 带有误差带的时间序列 （Time Series with Error Bands）"></a>42 带有误差带的时间序列 （Time Series with Error Bands）</h2><p><strong>如果您有一个时间序列数据集，每个时间点（日期/时间戳）有多个观测值，则可以构建带有误差带的时间序列</strong>。 您可以在下面看到一些基于每天不同时间订单的示例。 另一个关于45天持续到达的订单数量的例子。</p>
<p>在该方法中，订单数量的平均值由白线表示。 并且计算95％置信区间并围绕均值绘制。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">import</span> sem

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/user_orders_hourofday.csv"</span><span class="token punctuation">)</span>
df_mean <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'order_hour_of_day'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quantity<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_se <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'order_hour_of_day'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quantity<span class="token punctuation">.</span>apply<span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">.</span>mul<span class="token punctuation">(</span><span class="token number">1.96</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"# Orders"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>  
x <span class="token operator">=</span> df_mean<span class="token punctuation">.</span>index
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> df_mean<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">,</span> df_mean <span class="token operator">-</span> df_se<span class="token punctuation">,</span> df_mean <span class="token operator">+</span> df_se<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"#3F5D7D"</span><span class="token punctuation">)</span>  

<span class="token comment" spellcheck="true"># Decorations</span>
<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"User Orders by Hour of Day (95% confidence)"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"Hour of Day"</span><span class="token punctuation">)</span>

s<span class="token punctuation">,</span> e <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_xlim<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Horizontal Tick lines  </span>
<span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    
    plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token punctuation">,</span> xmin<span class="token operator">=</span>s<span class="token punctuation">,</span> xmax<span class="token operator">=</span>e<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108385827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># "Data Source: https://www.kaggle.com/olistbr/brazilian-ecommerce#olist_orders_dataset.csv"</span>
<span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse
<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">import</span> sem

<span class="token comment" spellcheck="true"># Import Data</span>
df_raw <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://raw.githubusercontent.com/selva86/datasets/master/orders_45d.csv'</span><span class="token punctuation">,</span>
                     parse_dates<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'purchase_time'</span><span class="token punctuation">,</span> <span class="token string">'purchase_date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data: Daily Mean and SE Bands</span>
df_mean <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'purchase_date'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quantity<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_se <span class="token operator">=</span> df_raw<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'purchase_date'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quantity<span class="token punctuation">.</span>apply<span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">.</span>mul<span class="token punctuation">(</span><span class="token number">1.96</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"# Daily Orders"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>  
x <span class="token operator">=</span> <span class="token punctuation">[</span>d<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> df_mean<span class="token punctuation">.</span>index<span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> df_mean<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">,</span> df_mean <span class="token operator">-</span> df_se<span class="token punctuation">,</span> df_mean <span class="token operator">+</span> df_se<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"#3F5D7D"</span><span class="token punctuation">)</span>  

<span class="token comment" spellcheck="true"># Decorations</span>
<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>str<span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Daily Order Quantity of Brazilian Retail with Error Bands (95% confidence)"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Axis limits</span>
s<span class="token punctuation">,</span> e <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_xlim<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token number">-2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Horizontal Tick lines  </span>
<span class="token keyword">for</span> y <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    
    plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token punctuation">,</span> xmin<span class="token operator">=</span>s<span class="token punctuation">,</span> xmax<span class="token operator">=</span>e<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083922125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="43-堆积面积图-（Stacked-Area-Chart）"><a href="#43-堆积面积图-（Stacked-Area-Chart）" class="headerlink" title="43 堆积面积图 （Stacked Area Chart）"></a>43 堆积面积图 （Stacked Area Chart）</h2><p><strong>堆积面积图可以直观地显示多个时间序列的贡献程度，因此很容易相互比较</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://raw.githubusercontent.com/selva86/datasets/master/nightvisitors.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decide Colors</span>
mycolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> <span class="token string">'tab:blue'</span><span class="token punctuation">,</span> <span class="token string">'tab:green'</span><span class="token punctuation">,</span> <span class="token string">'tab:orange'</span><span class="token punctuation">,</span> <span class="token string">'tab:brown'</span><span class="token punctuation">,</span> <span class="token string">'tab:grey'</span><span class="token punctuation">,</span> <span class="token string">'tab:pink'</span><span class="token punctuation">,</span> <span class="token string">'tab:olive'</span><span class="token punctuation">]</span>      

<span class="token comment" spellcheck="true"># Draw Plot and Annotate</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
columns <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
labs <span class="token operator">=</span> columns<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare data</span>
x  <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'yearmon'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y0 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y1 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y2 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y3 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y4 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y5 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y6 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y7 <span class="token operator">=</span> df<span class="token punctuation">[</span>columns<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">[</span>y0<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> y4<span class="token punctuation">,</span> y6<span class="token punctuation">,</span> y7<span class="token punctuation">,</span> y5<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> y3<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot for each column</span>
labs <span class="token operator">=</span> columns<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>stackplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> labels<span class="token operator">=</span>labs<span class="token punctuation">,</span> colors<span class="token operator">=</span>mycolors<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Night Visitors in Australian Regions'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set<span class="token punctuation">(</span>ylim<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> ncol<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221083948203.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="44-未堆积的面积图-（Area-Chart-UnStacked）"><a href="#44-未堆积的面积图-（Area-Chart-UnStacked）" class="headerlink" title="44 未堆积的面积图 （Area Chart UnStacked）"></a>44 未堆积的面积图 （Area Chart UnStacked）</h2><p><strong>未堆积面积图用于可视化两个或更多个系列相对于彼此的进度（起伏）</strong>。 在下面的图表中，您可以清楚地看到随着失业中位数持续时间的增加，个人储蓄率会下降。 未堆积面积图表很好地展示了这种现象。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare Data</span>
x <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y1 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'psavert'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y2 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'uempmed'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
mycolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> <span class="token string">'tab:blue'</span><span class="token punctuation">,</span> <span class="token string">'tab:green'</span><span class="token punctuation">,</span> <span class="token string">'tab:orange'</span><span class="token punctuation">,</span> <span class="token string">'tab:brown'</span><span class="token punctuation">,</span> <span class="token string">'tab:grey'</span><span class="token punctuation">,</span> <span class="token string">'tab:pink'</span><span class="token punctuation">,</span> <span class="token string">'tab:olive'</span><span class="token punctuation">]</span>      
columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'psavert'</span><span class="token punctuation">,</span> <span class="token string">'uempmed'</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token operator">=</span>y1<span class="token punctuation">,</span> y2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> label<span class="token operator">=</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token operator">=</span>y2<span class="token punctuation">,</span> y2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> label<span class="token operator">=</span>columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Personal Savings Rate vs Median Duration of Unemployment'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set<span class="token punctuation">(</span>ylim<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">30.0</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Tick lines  </span>
<span class="token keyword">for</span> y <span class="token keyword">in</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">30.0</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    
    plt<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span>y<span class="token punctuation">,</span> xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span>len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> linestyles<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108401528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="45-日历热力图-（Calendar-Heat-Map）"><a href="#45-日历热力图-（Calendar-Heat-Map）" class="headerlink" title="45 日历热力图 （Calendar Heat Map）"></a>45 日历热力图 （Calendar Heat Map）</h2><p>与时间序列相比，日历地图是可视化基于时间的数据的备选和不太优选的选项。 虽然可以在视觉上吸引人，但数值并不十分明显。 然而，它<strong>可以很好地描绘极端值和假日效果</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 导入资源库：pip install calmap  </span>
<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl
<span class="token keyword">import</span> calmap

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/yahoo.csv"</span><span class="token punctuation">,</span> parse_dates<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span><span class="token string">'date'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
calmap<span class="token punctuation">.</span>calendarplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'2014'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'VIX.Close'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fig_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'figsize'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> yearlabel_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span> subplot_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">'Yahoo Stock Prices'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221084126856.png" alt="在这里插入图片描述"></p>
<h2 id="46-季节图-（Seasonal-Plot）"><a href="#46-季节图-（Seasonal-Plot）" class="headerlink" title="46 季节图 （Seasonal Plot）"></a>46 季节图 （Seasonal Plot）</h2><p><strong>季节图可用于比较上一季中同一天（年/月/周等）的时间序列</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Prepare data</span>
df<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>parse<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span>year <span class="token keyword">for</span> d <span class="token keyword">in</span> df<span class="token punctuation">.</span>date<span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>parse<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%b'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> df<span class="token punctuation">.</span>date<span class="token punctuation">]</span>
years <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw Plot</span>
mycolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tab:red'</span><span class="token punctuation">,</span> <span class="token string">'tab:blue'</span><span class="token punctuation">,</span> <span class="token string">'tab:green'</span><span class="token punctuation">,</span> <span class="token string">'tab:orange'</span><span class="token punctuation">,</span> <span class="token string">'tab:brown'</span><span class="token punctuation">,</span> <span class="token string">'tab:grey'</span><span class="token punctuation">,</span> <span class="token string">'tab:pink'</span><span class="token punctuation">,</span> <span class="token string">'tab:olive'</span><span class="token punctuation">,</span> <span class="token string">'deeppink'</span><span class="token punctuation">,</span> <span class="token string">'steelblue'</span><span class="token punctuation">,</span> <span class="token string">'firebrick'</span><span class="token punctuation">,</span> <span class="token string">'mediumseagreen'</span><span class="token punctuation">]</span>      
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> y <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token string">'month'</span><span class="token punctuation">,</span> <span class="token string">'traffic'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>year<span class="token operator">==</span>y<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span>y<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>year<span class="token operator">==</span>y<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token number">9</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">.</span>year<span class="token operator">==</span>y<span class="token punctuation">,</span> <span class="token string">'traffic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> color<span class="token operator">=</span>mycolors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decoration</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">750</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'$Air Traffic$'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Monthly Seasonal Plot: Air Passengers Traffic (1949 - 1969)"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Remove borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span>    
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>   
<span class="token comment" spellcheck="true"># plt.legend(loc='upper right', ncol=2, fontsize=12)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221084150828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="七、分组-（Groups）"><a href="#七、分组-（Groups）" class="headerlink" title="七、分组 （Groups）"></a>七、分组 （Groups）</h1><h2 id="47-树状图-（Dendrogram）"><a href="#47-树状图-（Dendrogram）" class="headerlink" title="47 树状图 （Dendrogram）"></a>47 树状图 （Dendrogram）</h2><p><strong>树形图基于给定的距离度量将相似的点组合在一起，并基于点的相似性将它们组织在树状链接中</strong>。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> scipy<span class="token punctuation">.</span>cluster<span class="token punctuation">.</span>hierarchy <span class="token keyword">as</span> shc

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"USArrests Dendograms"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>  
dend <span class="token operator">=</span> shc<span class="token punctuation">.</span>dendrogram<span class="token punctuation">(</span>shc<span class="token punctuation">.</span>linkage<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Murder'</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">,</span> <span class="token string">'UrbanPop'</span><span class="token punctuation">,</span> <span class="token string">'Rape'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'ward'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>df<span class="token punctuation">.</span>State<span class="token punctuation">.</span>values<span class="token punctuation">,</span> color_threshold<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221084217234.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="48-簇状图-（Cluster-Plot）"><a href="#48-簇状图-（Cluster-Plot）" class="headerlink" title="48 簇状图 （Cluster Plot）"></a>48 簇状图 （Cluster Plot）</h2><p><strong>簇状图 （Cluster Plot）可用于划分属于同一群集的点</strong>。 下面是根据USArrests数据集将美国各州分为5组的代表性示例。 此图使用“谋杀”和“攻击”列作为X和Y轴。 或者，您可以将第一个到主要组件用作X轴和Y轴。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> AgglomerativeClustering
<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>spatial <span class="token keyword">import</span> ConvexHull

<span class="token comment" spellcheck="true"># Import Data</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Agglomerative Clustering</span>
cluster <span class="token operator">=</span> AgglomerativeClustering<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> affinity<span class="token operator">=</span><span class="token string">'euclidean'</span><span class="token punctuation">,</span> linkage<span class="token operator">=</span><span class="token string">'ward'</span><span class="token punctuation">)</span>  
cluster<span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Murder'</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">,</span> <span class="token string">'UrbanPop'</span><span class="token punctuation">,</span> <span class="token string">'Rape'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>cluster<span class="token punctuation">.</span>labels_<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'tab10'</span><span class="token punctuation">)</span>  

<span class="token comment" spellcheck="true"># Encircle</span>
<span class="token keyword">def</span> <span class="token function">encircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> ax<span class="token operator">=</span>None<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> ax<span class="token punctuation">:</span> ax<span class="token operator">=</span>plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    p <span class="token operator">=</span> np<span class="token punctuation">.</span>c_<span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span>
    hull <span class="token operator">=</span> ConvexHull<span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    poly <span class="token operator">=</span> plt<span class="token punctuation">.</span>Polygon<span class="token punctuation">(</span>p<span class="token punctuation">[</span>hull<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_patch<span class="token punctuation">(</span>poly<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Draw polygon surrounding vertices    </span>
encircle<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'Murder'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
encircle<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Murder'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"tab:blue"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
encircle<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Murder'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"tab:red"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
encircle<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Murder'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"tab:green"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
encircle<span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Murder'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>cluster<span class="token punctuation">.</span>labels_ <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Assault'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">"tab:orange"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Decorations</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Murder'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Assault'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Agglomerative Clustering of USArrests (5 Groups)'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020122108424782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="49-安德鲁斯曲线-（Andrews-Curve）"><a href="#49-安德鲁斯曲线-（Andrews-Curve）" class="headerlink" title="49 安德鲁斯曲线 （Andrews Curve）"></a>49 安德鲁斯曲线 （Andrews Curve）</h2><p><code>安德鲁斯曲线有助于可视化是否存在基于给定分组的数字特征的固有分组</code>。 如果要素（数据集中的列）无法区分组（cyl），那么这些线将不会很好地隔离，如下所示。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> andrews_curves

<span class="token comment" spellcheck="true"># Import</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'cars'</span><span class="token punctuation">,</span> <span class="token string">'carname'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
andrews_curves<span class="token punctuation">(</span>df<span class="token punctuation">,</span> <span class="token string">'cyl'</span><span class="token punctuation">,</span> colormap<span class="token operator">=</span><span class="token string">'Set1'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Andrews Curves of mtcars'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221084308466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="50-平行坐标-（Parallel-Coordinates）"><a href="#50-平行坐标-（Parallel-Coordinates）" class="headerlink" title="50 平行坐标 （Parallel Coordinates）"></a>50 平行坐标 （Parallel Coordinates）</h2><p><strong>平行坐标有助于可视化特征是否有助于有效地隔离组</strong>。 如果实现隔离，则该特征可能在预测该组时非常有用。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> parallel_coordinates

<span class="token comment" spellcheck="true"># Import Data</span>
df_final <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"https://raw.githubusercontent.com/selva86/datasets/master/diamonds_filter.csv"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Plot</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">)</span>
parallel_coordinates<span class="token punctuation">(</span>df_final<span class="token punctuation">,</span> <span class="token string">'cut'</span><span class="token punctuation">,</span> colormap<span class="token operator">=</span><span class="token string">'Dark2'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Lighten borders</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"top"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"bottom"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"right"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Parallel Coordinated of Diamonds'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img-blog.csdnimg.cn/20201221084327620.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="资源传送门"><a href="#资源传送门" class="headerlink" title="资源传送门"></a>资源传送门</h1><ul>
<li>关注【<strong>做一个柔情的程序猿</strong>】公众号</li>
<li>在【<strong>做一个柔情的程序猿</strong>】公众号后台回复 【<strong>python资料</strong>】【<strong>2020秋招</strong>】 即可获取相应的惊喜哦！</li>
<li>自己搭建的博客地址：<a href="https://gain-wyj.cn/">梦魇回生的博客</a></li>
<li><img src="https://img-blog.csdnimg.cn/20201221084826130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201221084838740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3c3lkd3Nibg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ul>
<h1 id="「❤️-感谢大家」"><a href="#「❤️-感谢大家」" class="headerlink" title="「❤️ 感谢大家」"></a>「❤️ 感谢大家」</h1><ul>
<li>点赞支持下吧，让更多的人也能看到这篇内容（收藏不点赞，都是耍流氓 -_-）</li>
<li>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程</li>
</ul>

            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">真诚赞赏，手留余香</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《汇总超全的Matplotlib可视化最有价值的 50 个图表（附完整 Python 源代码）》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2020/12/21/matplotlib-visualization/" property="cc:attributionName"
               rel="cc:attributionURL">
                梦魇回生
            </a> 采用
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    
    <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'd7d69ebd9339fe5599a2',
        clientSecret: '017d75ea0a97b30451b760c7ee27ee332045884f',
        repo: 'gain-wyj.github.io',
        owner: 'gain-wyj',
        admin: "gain-wyj",
        id: '2020/12/21/matplotlib-visualization/',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '',
        appKey: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/12/23/colormap/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/24.jpg" class="responsive-img" alt="MATLAB函数解析：colormap——查看并设置当前颜色图">
                        
                        <span class="card-title">MATLAB函数解析：colormap——查看并设置当前颜色图</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            MATLAB函数解析：colormap——查看并设置当前颜色图，针对该函数进行扩展，以详细的例子进行解析说明。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2020-12-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/matlab/" class="post-category" target="_blank">
                                    matlab
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/matlab函数/" target="_blank">
                        <span class="chip bg-color">matlab函数</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/12/17/a-collection-of-style-codes/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/25.jpg" class="responsive-img" alt="python风格代码荟萃">
                        
                        <span class="card-title">python风格代码荟萃</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            总结一下在python中常用的一些风格代码。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2020-12-17
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category" target="_blank">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/" target="_blank">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 梦魇回生的博客<br />'
            + '作者: 梦魇回生<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; 2020 WangYujun版权所有 | Powered by Hexo | Theme Matery

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">42.3k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
            <br>
            
            <span id="busuanzi_container_site_pv" style='display:none'>
                <i class="fa fa-heart-o"></i>
                本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
            <span id="busuanzi_container_site_uv" style='display:none'>
                人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
            </span>
            
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/gain-wyj" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:3286547557@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="https://zhihu.com/people/梦魇" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-inverse">知</i>
    </a>



    <a href="http://wpa.qq.com/msgrd?v=3&uin=3286547557&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="https://weibo.com/时光静好0岁月如歌" class="tooltipped" target="_blank" data-tooltip="关注我的微博" data-position="top" data-delay="50">
        <i class="fa fa-weibo"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);// 50ms周期检测函数
        var pvcountOffset = 80000;// 初始化首次数据
        var uvcountOffset = 20000;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int);// 停止检测
            }
        }
    });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2019, 09, 11, 00, 00, 00); //北京时间2019-9-11 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>



    
    <script src="/libs/others/clicklove.js"></script>
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    
    <script type="text/javascript" src="/libs/others/snow.js"></script>
    

</body>

</html>